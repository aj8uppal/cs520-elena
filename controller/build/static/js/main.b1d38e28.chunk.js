(this.webpackJsonpview=this.webpackJsonpview||[]).push([[0],{26:function(e,t,i){},45:function(e,t,i){},46:function(e,t,i){},48:function(e,t,i){"use strict";i.r(t);var r=i(0),a=i.n(r),s=i(19),l=i.n(s),n=(i(26),i(10)),o=i(8),c=i(20),d=i.n(c),p=(i.p,i(45),i(21),i(46),i(1)),u=i(4);var b=function(){var e=Object(r.useState)([]),t=Object(o.a)(e,2),i=t[0],a=t[1],s=Object(r.useState)(void 0),l=Object(o.a)(s,2),c=l[0],b=l[1],m=Object(r.useRef)(null);return Object(r.useEffect)((function(){if(m){Object(u.loadCss)("4.21");Object(u.loadModules)(["esri/config","esri/Map","esri/layers/FeatureLayer","esri/layers/GraphicsLayer","esri/views/SceneView","esri/WebScene","esri/layers/ElevationLayer","esri/widgets/Sketch/SketchViewModel","esri/Graphic","esri/geometry/Polyline","esri/layers/BaseElevationLayer","esri/layers/support/LabelClass","esri/Basemap","esri/geometry/Point","esri/layers/TileLayer"],{version:"4.21",css:!0}).then((function(e){var t=Object(o.a)(e,15),i=t[0],r=t[1],s=t[2],l=t[3],c=t[4],d=(t[5],t[6]),p=(t[7],t[8]),u=t[9],m=t[10],h=t[11],g=t[12],v=t[13],y=t[14];i.apiKey="AAPK4e870b84de1741d3933f19c0e4a079c62hgfr2QWI1X2cyUmJgaMTrOUp2cY79xTNnPZjdlltlZBfdAJnTXjRSZgqVeG6dq7";new s({source:[{id:1,address:"650 N Pleasant St, Amherst, MA 01003",longitude:-72.52587088060791,latitude:42.390934188741205,label:"Integrative Learning Center"}].map((function(e){return new p({attributes:{ObjectId:e.id,address:e.address,label:e.label},geometry:new v({longitude:e.longitude,latitude:e.latitude}),symbol:{type:"simple-marker",color:[226,119,40],outline:{color:[255,255,255],width:2}},popupTemplate:{title:"Places in Los Angeles",content:[{type:"fields",fieldInfos:[{fieldName:"label",label:"Name",visible:!0},{fieldName:"address",label:"Address",visible:!0}]}]}})})),renderer:{type:"simple",symbol:{type:"simple-marker",color:"#102A44",outline:{color:"#598DD8",width:2}}},popupTemplate:{title:"Places in Los Angeles",content:[{type:"fields",fieldInfos:[{fieldName:"address",label:"Address",visible:!0},{fieldName:"label",label:"Label",visible:!0}]}]},objectIdField:"ObjectID",fields:[{name:"ObjectID",alias:"ObjectID",type:"oid"},{name:"address",alias:"address",type:"string"},{name:"label",alias:"label",type:"string"}]});var f={type:"simple-line",color:"#8A2BE2",width:"4",style:"dash"},j=new l,w=new(m.createSubclass({properties:{exaggeration:null},load:function(){this._elevation=new d({url:"https://elevation3d.arcgis.com/arcgis/rest/services/WorldElevation3D/TopoBathy3D/ImageServer"}),this.addResolvingPromise(this._elevation.load())},fetchTile:function(e,t,i,r){return this._elevation.fetchTile(e,t,i,r).then(function(e){for(var t=this.exaggeration,i=0;i<e.values.length;i++)e.values[i]=e.values[i]*t;return e}.bind(this))}}))({exaggeration:8}),F=new g({baseLayers:[new y({url:"https://wtb.maptiles.arcgis.com/arcgis/rest/services/World_Topo_Base/MapServer"})]}),O=new r({ground:{layers:[new d({url:"https://elevation3d.arcgis.com/arcgis/rest/services/WorldElevation3D/Terrain3D/ImageServer"}),w]},basemap:F}),x=new c({container:"viewDiv",map:O,qualityProfile:"high",camera:{position:[-72.525387,42.364154,1e3],heading:.51,tilt:75}}),L=function(e,t,i,r){var a=[{type:"simple-line",color:[234,181,67,.65],width:4},{type:"simple-line",color:[88,177,159,.65],width:4},{type:"simple-line",color:[130,88,159,.65],width:4},{type:"simple-line",color:[24,44,97,.65],width:4}][r];O.add(j);var s=[];e=[[t[1],t[0]]].concat(Object(n.a)(e),[[i[1],i[0]]]);for(var l=0;l<e.length;l++)s.push(e[l]);var o=new p({geometry:{type:"polyline",paths:s},symbol:a});j.add(o)};b((function(){return L}));var S,I,A=new s({url:"https://services3.arcgis.com/GVgbJbqm8hXASVYi/arcgis/rest/services/Trails/FeatureServer/0",elevationInfo:{mode:"relative-to-ground",offset:3},renderer:{type:"simple",symbol:{type:"line-3d",symbolLayers:[{type:"line",material:{color:"#FF5500"},size:"2px"}]}}}),T=new s({url:"https://services3.arcgis.com/GVgbJbqm8hXASVYi/arcgis/rest/services/Trailheads/FeatureServer/0",elevationInfo:{mode:"relative-to-ground"},renderer:{type:"simple",symbol:{type:"point-3d",symbolLayers:[{type:"icon",resource:{primitive:"circle"},material:{color:"#FF5500"},outline:{color:"#FFFFFF",size:1},size:"10px"}],verticalOffset:{screenLength:20,maxWorldLength:200,minWorldLength:20},callout:{type:"line",size:1,color:"#FFFFFF"}}},labelingInfo:[new h({labelExpressionInfo:{expression:"$feature.TRL_NAME"},symbol:{type:"label-3d",symbolLayers:[{type:"text",material:{color:"#FFFFFF"},halo:{size:1,color:[0,0,0,.5]},font:{size:11,family:"sans-serif"}}]}})]});x.on("drag",["Shift"],(function(e){e.stopPropagation();var t=x.toMap(e);"start"===e.action?(S&&x.graphics.remove(S),I=new u({paths:[[t.x,t.y,t.z]],spatialReference:{wkid:102100}}),S=new p({geometry:I,symbol:f})):(S&&x.graphics.remove(S),I.paths[0].push([t.x,t.y,t.z]),S=new p({geometry:I,symbol:f}),console.log(I.paths),x.graphics.add(S))})),x.on("click",(function(e){var t=e.mapPoint,i=t.latitude,r=t.longitude,s=new p({geometry:new v({longitude:r,latitude:i}),symbol:{type:"simple-marker",color:[226,119,40],outline:{color:[255,255,255],width:2}}});a((function(e){return e.length<2?[].concat(Object(n.a)(e),[[i,r]]):(x.graphics.removeAll(),j.graphics.removeAll(),[[i,r]])})),x.graphics.add(s)})),O.addMany([A,T])})).catch((function(e){console.error(e)}))}}),[m]),Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)("div",{id:"viewDiv"}),Object(p.jsx)("div",{id:"overlay",children:Object(p.jsxs)("form",{ref:m,onSubmit:function(e){e.preventDefault(),d.a.post("/compute_shortest_path",{start:{latitude:i[0][0],longitude:i[0][1]},end:{latitude:i[1][0],longitude:i[1][1]}}).then((function(e){for(var t=0;t<e.data.length;t++)c(e.data[t],[i[0][0],i[0][1]],[i[1][0],i[1][1]],t)}))},children:[Object(p.jsx)("div",{id:"label",children:"Pick the ".concat(0===i.length?"start":1===i.length?"end":"ready"," point (Ctrl-click)")}),Object(p.jsx)("button",{type:"submit",className:"btn-submit ".concat(2!==i.length?"disabled":""),children:"Route!"}),Object(p.jsxs)("div",{id:"start",children:[Object(p.jsx)("div",{className:"label",children:"Start"}),Object(p.jsx)("div",{children:"Latitude: ".concat(i[0]?i[0][0]:"...",", Longitude: ").concat(i[0]?i[0][1]:"...")})]}),Object(p.jsxs)("div",{id:"end",children:[Object(p.jsx)("div",{className:"label",children:"End"}),Object(p.jsx)("div",{children:"Latitude: ".concat(i[1]?i[1][0]:"...",", Longitude: ").concat(i[1]?i[1][1]:"...")})]})]})})]})},m=function(e){e&&e instanceof Function&&i.e(3).then(i.bind(null,49)).then((function(t){var i=t.getCLS,r=t.getFID,a=t.getFCP,s=t.getLCP,l=t.getTTFB;i(e),r(e),a(e),s(e),l(e)}))};l.a.render(Object(p.jsx)(a.a.StrictMode,{children:Object(p.jsx)(b,{})}),document.getElementById("root")),m()}},[[48,1,2]]]);
//# sourceMappingURL=main.b1d38e28.chunk.js.map